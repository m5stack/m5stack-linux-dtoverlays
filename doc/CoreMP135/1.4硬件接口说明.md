# 硬件接口说明

CoreMP135 有丰富的扩展接口，下面将详细介绍接口的电气属性。

## 接口总览

CoreMP135 提供了网口、USB、摄像头、LCD、HDMI、40PIN等功能接口，方便用户进行图像多媒体、深度学习算法等应用的开发和测试。开发板接口布局如下： 

TODO

## 电源接口

开发板提供一路USB Type C接口(接口1)，作为供电接口，需要使用支持5V/3A的电源适配器为开发板供电。将电源适配器接入开发板后，开发板红色电源指示灯亮起，说明开发板供电正常。

> 警告：  
>   请不要使用电脑USB接口为开发板供电，否则可能会因供电不足造成开发板异常断电、反复重启等情况。

## 调试串口

开发板提供一路调试串口(接口3)，以实现串口登录、调试功能。电脑串口工具的参数配置如下：

- 波特率（Baud rate）：921600
- 数据位（Data bits）：8
- 奇偶校验（Parity）：None
- 停止位（Stop bits）：1
- 流控（Flow Control）：无

串口连接时，需要将杜邦线接入开发板接口3，串口USB转接板接入电脑。连接完成后如下图：
TODO

## 有线网口

开发板提供两路千兆以太网接口，支持1000BASE-T、100BASE-T标准，默认采用静态IP模式，IP地址192.168.1.10。如需确认开发板IP地址，可通过串口登录设备，并用ifconfig命令进行查看 eth0网口的配置：

```bash
sunrise@ubuntu:/# ifconfig 
eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.10  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::211:22ff:fe6f:de17  prefixlen 64  scopeid 0x20<link>
        ether 00:11:22:6f:de:17  txqueuelen 1000  (Ethernet)
        RX packets 112  bytes 7327 (7.3 KB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 197  bytes 8678 (8.6 KB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        device interrupt 39  base 0xc000 
```

开发板插入网线后，以太网驱动会建立连接，如果系统有如下打印，说明网线连接正常：

```bash
[13293.952661] st_gmac a5014000.ethernet eth0: Link is Down
[13295.062996] st_gmac a5014000.ethernet: Link is Up - 1000/Full 
[13296.000750] st_gmac a5014000.ethernet eth0: Link is Up - 1Gbps/Full - flow control rx/tx
```

## HDMI接口

开发板提供一路HDMI(接口9)显示接口，最高支持1080P分辨率。开发板通过HDMI接口在显示器输出Ubuntu系统桌面(Ubuntu Server版本显示logo图标)。此外，HDMI接口还支持实时显示摄像头、网络流画面功能。

目前HDMI接口支持的显示分辨率如下：

- 1280x720

## USB接口
由于 CoreMP135 芯片只提供一路USB接口，开发板通过硬件电路实现了多路USB接口扩展，满足用户对多路USB设备接入的需求，接口描述如下：

| 接口类型 |	接口序号 |	接口数量 |	接口描述 |
| --- | --- | --- | --- |
| Micro USB 2.0	| 接口4 |	1路	USB Device模式，用于连接主机实现ADB、Fastboot、UVC等功能 |
| USB 2.0 Type A |	接口5 |	2路	USB Host模式，用于接入USB 2.0外设 |
| USB 3.0 Type A |	接口6 |	1路	USB Host模式，用于接入USB 3.0外设 |


USB主从模式切换需要由用户手动切换，可使用提供好的脚本或者以下命令进行 otg 状态切换。

开发板USB Host、Device功能互斥，Device接口接入设备后，Host接口会自动失效。

### 接入U盘

开发板USB Type A接口(接口5和6)，支持U盘功能，可自动检测U盘接入并挂载，默认挂载目录为/media/sda1。用户可通过touch命令确认U盘工作正常，如下：

```bash
sunrise@ubuntu:/media/sda1$ sudo touch test
[sudo] password for sunrise: 
sunrise@ubuntu:/media/sda1$ ls -l test 
-rwxr-xr-x 1 root root 0 Apr 30 21:19 test
sunrise@ubuntu:/media/sda1$
```


## Micro SD接口

开发板提供1路Micro SD存储卡接口(接口12)。推荐使用至少8GB容量的存储卡，以便满足Ubuntu操作系统及相关功能包的安装要求。

> 警告:  
> 开发板使用中禁止热插拔TF存储卡，否则会造成系统运行异常，甚至造成存储卡文件系统损坏。

## Wi-Fi天线接口

开发板的无线网络支持板载和外置天线两种配置，通常情况下板载天线可以满足使用需求。当开发板安装金属材质外壳后，需要连接外置天线到（接口11），以增强信号强度。

## M5 Bus接口

TODO
















